{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/@skpm/dialog/lib/index.js","webpack://exports/./node_modules/@skpm/dialog/lib/message-box.js","webpack://exports/./node_modules/@skpm/dialog/lib/open-dialog.js","webpack://exports/./node_modules/@skpm/dialog/lib/save-dialog.js","webpack://exports/./node_modules/@skpm/dialog/lib/utils.js","webpack://exports/./node_modules/@skpm/fs/index.js","webpack://exports/./node_modules/@skpm/path/index.js","webpack://exports/./node_modules/@skpm/path/sketch-specifics.js","webpack://exports/./node_modules/@skpm/promise/index.js","webpack://exports/./node_modules/json-format/index.js","webpack://exports/./src/generators.js","webpack://exports/./src/renderJSON.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/ui\"","webpack://exports/external \"util\""],"names":["convertSketchColourToRGBA","colour","red","Math","round","green","blue","alpha","extractStyles","context","convert","doc","document","pages","pagesExist","alignments","colors","styles","TypographyStyles","DocumentColours","textAlignments","forEach","page","String","name","layers","layer","alignment","textAlignment","push","class","MSTextLayer","textTransform","styleAttributes","fontFamily","dom","fromNative","style","fontWeight","fontSize","lineHeight","fontStyle","undefined","paragraphSpacing","letterSpacing","characterSpacing","kerning","borders","adjustments","firstEnabledFill","color","allPagesHere","messages","length","Object","keys","messageString","message","UI","alert","DesignSystemTokens","colours","typography","render","generateTextStyles","json","typeStyles","Array","item","map","align","index","split","textColor","Style","colorToString","checkMatch","baseStyle","newStyle","prop","value","JSON","stringify","generateJSONStyles","arrayFormat","refinedBreakpoints","currentStyle","adjustmentLength","checked","formattedTokens","key","save","filename","fileContents","console","log","targetFile","path","resolve","fs","writeFileSync","designTokens","options","textSaveSelection","Sketch","getInputFromUser","type","INPUT_TYPE","selection","possibleValues","err","textSaveMethod","arranged","saveDialog","dialog","showSaveDialog","defaultPath","then","result","cancelled","filePath","jsonFormat","showMessage"],"mappings":";;;;;;;;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;;AAEA;AACA,kBAAkB,mBAAO,CAAC,qEAAe;AACzC,sBAAsB,mBAAO,CAAC,qEAAe;AAC7C,kBAAkB,mBAAO,CAAC,qEAAe;AACzC,sBAAsB,mBAAO,CAAC,qEAAe;AAC7C,kBAAkB,mBAAO,CAAC,qEAAe;AACzC,sBAAsB,mBAAO,CAAC,qEAAe;AAC7C;AACA;;;;;;;;;;;;ACXA;AACA,YAAY,mBAAO,CAAC,yDAAS;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;ACnIA;AACA,YAAY,mBAAO,CAAC,yDAAS;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;AClHA;AACA,YAAY,mBAAO,CAAC,yDAAS;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AC9DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,OAAO;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sDAAsD;AACrF,mCAAmC,0DAA0D;AAC7F,6BAA6B,mDAAmD;AAChF,wBAAwB,eAAe;AACvC,wBAAwB,iDAAiD;AACzE,0BAA0B,gDAAgD;AAC1E,gCAAgC,sDAAsD;AACtF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;AC/UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,mBAAO,CAAC,yEAAoB;;AAElD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAsC,8BAA8B;AACpE;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,UAAU,yBAAyB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,qBAAqB;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU,aAAa;AACvB;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,WAAW;AACX;AACA,qCAAqC;AACrC;AACA;AACA,SAAS;AACT;AACA;AACA,gDAAgD;AAChD;AACA,WAAW;AACX;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,cAAc;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;AC3gBA,WAAW,mBAAO,CAAC,kBAAM;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,kBAAkB;AAC/B;AACA,aAAa,kBAAkB;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC,SAAS;AAC9C;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC9QA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU,sBAAsB;AAChC,YAAY;AACZ,GAAG;AACH;AACA;AACA,GAAG;AACH,wBAAwB,kCAAkC,EAAE;AAC5D,0BAA0B,gBAAgB;AAC1C,uCAAuC,kDAAkD;;AAEzF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0B;;AAEA;AACA,iBAAiB,iBAAiB;AAClC;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,c;AACA,K;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,4BAA4B,EAAE;AAC1E;AACA,kCAAkC;;AAElC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5EA;AACA;;AAEA,SAASA,yBAAT,CAAmCC,MAAnC,EAA2C;AACzC,MAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,MAAM,CAACC,GAAP,KAAe,GAA1B,CAAZ;AACA,MAAMG,KAAK,GAAGF,IAAI,CAACC,KAAL,CAAWH,MAAM,CAACI,KAAP,KAAiB,GAA5B,CAAd;AACA,MAA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","file":"__renderJSON.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/renderJSON.js\");\n","/* let's try to match the API from Electron's Dialog\n(https://github.com/electron/electron/blob/master/docs/api/dialog.md) */\n\nmodule.exports = {\n  showOpenDialog: require('./open-dialog').openDialog,\n  showOpenDialogSync: require('./open-dialog').openDialogSync,\n  showSaveDialog: require('./save-dialog').saveDialog,\n  showSaveDialogSync: require('./save-dialog').saveDialogSync,\n  showMessageBox: require('./message-box').messageBox,\n  showMessageBoxSync: require('./message-box').messageBoxSync,\n  // showErrorBox: require('./error-box'),\n}\n","/* eslint-disable no-not-accumulator-reassign/no-not-accumulator-reassign */\nvar utils = require('./utils')\n\nvar typeMap = {\n  none: 0,\n  info: 1,\n  error: 2,\n  question: 1,\n  warning: 2,\n}\n\nfunction setupOptions(document, options) {\n  if (\n    !document ||\n    (typeof document.isKindOfClass !== 'function' && !document.sketchObject)\n  ) {\n    options = document\n    document = undefined\n  } else if (document.sketchObject) {\n    document = document.sketchObject\n  }\n  if (!options) {\n    options = {}\n  }\n\n  var dialog = NSAlert.alloc().init()\n\n  if (options.type) {\n    dialog.alertStyle = typeMap[options.type] || 0\n  }\n\n  if (options.buttons && options.buttons.length) {\n    options.buttons.forEach(function addButton(button) {\n      dialog.addButtonWithTitle(\n        options.normalizeAccessKeys ? button.replace(/&/g, '') : button\n      )\n      // TODO: add keyboard shortcut if options.normalizeAccessKeys\n    })\n  }\n\n  if (typeof options.defaultId !== 'undefined') {\n    var buttons = dialog.buttons()\n    if (options.defaultId < buttons.length) {\n      // Focus the button at defaultId if the user opted to do so.\n      // The first button added gets set as the default selected.\n      // So remove that default, and make the requested button the default.\n      buttons[0].setKeyEquivalent('')\n      buttons[options.defaultId].setKeyEquivalent('\\r')\n    }\n  }\n\n  if (options.title) {\n    // not shown on macOS\n  }\n\n  if (options.message) {\n    dialog.messageText = options.message\n  }\n\n  if (options.detail) {\n    dialog.informativeText = options.detail\n  }\n\n  if (options.checkboxLabel) {\n    dialog.showsSuppressionButton = true\n    dialog.suppressionButton().title = options.checkboxLabel\n\n    if (typeof options.checkboxChecked !== 'undefined') {\n      dialog.suppressionButton().state = options.checkboxChecked\n        ? NSOnState\n        : NSOffState\n    }\n  }\n\n  if (options.icon) {\n    if (typeof options.icon === 'string') {\n      options.icon = NSImage.alloc().initWithContentsOfFile(options.icon)\n    }\n    dialog.icon = options.icon\n  } else if (\n    typeof __command !== 'undefined' &&\n    __command.pluginBundle() &&\n    __command.pluginBundle().icon()\n  ) {\n    dialog.icon = __command.pluginBundle().icon()\n  } else {\n    var icon = NSImage.imageNamed('plugins')\n    if (icon) {\n      dialog.icon = icon\n    }\n  }\n\n  return {\n    document: document,\n    options: options,\n    dialog: dialog,\n  }\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowmessageboxbrowserwindow-options\nmodule.exports.messageBox = function messageBox(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialog(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      return {\n        response:\n          setup.options.buttons && setup.options.buttons.length\n            ? Number(returnCode) - 1000\n            : Number(returnCode),\n        checkboxChecked: _dialog.suppressionButton().state() == NSOnState,\n      }\n    },\n    setup.document\n  )\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowmessageboxsyncbrowserwindow-options\nmodule.exports.messageBoxSync = function messageBoxSync(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialogSync(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      return setup.options.buttons && setup.options.buttons.length\n        ? Number(returnCode) - 1000\n        : Number(returnCode)\n    },\n    setup.document\n  )\n}\n","/* eslint-disable no-not-accumulator-reassign/no-not-accumulator-reassign */\nvar utils = require('./utils')\n\nfunction setupOptions(document, options) {\n  if (\n    !document ||\n    (typeof document.isKindOfClass !== 'function' && !document.sketchObject)\n  ) {\n    options = document\n    document = undefined\n  }\n  if (!options) {\n    options = {}\n  }\n\n  var dialog = NSOpenPanel.openPanel()\n\n  if (options.title) {\n    dialog.title = options.title\n  }\n\n  if (options.defaultPath) {\n    dialog.setDirectoryURL(utils.getURL(options.defaultPath))\n  }\n\n  if (options.buttonLabel) {\n    dialog.prompt = options.buttonLabel\n  }\n\n  if (options.filters && options.filters.length) {\n    var exts = []\n    options.filters.forEach(function setFilter(filter) {\n      filter.extensions.forEach(function setExtension(ext) {\n        exts.push(ext)\n      })\n    })\n\n    dialog.allowedFileTypes = exts\n  }\n\n  var hasProperty =\n    Array.isArray(options.properties) && options.properties.length > 0\n  dialog.canChooseFiles =\n    hasProperty && options.properties.indexOf('openFile') !== -1\n  dialog.canChooseDirectories =\n    hasProperty && options.properties.indexOf('openDirectory') !== -1\n  dialog.allowsMultipleSelection =\n    hasProperty && options.properties.indexOf('multiSelections') !== -1\n  dialog.showsHiddenFiles =\n    hasProperty && options.properties.indexOf('showHiddenFiles') !== -1\n  dialog.canCreateDirectories =\n    hasProperty && options.properties.indexOf('createDirectory') !== -1\n  dialog.resolvesAliases =\n    !hasProperty || options.properties.indexOf('noResolveAliases') === -1\n  dialog.treatsFilePackagesAsDirectories =\n    hasProperty && options.properties.indexOf('treatPackageAsDirectory') !== -1\n\n  if (options.message) {\n    dialog.message = options.message\n  }\n\n  return {\n    document: document,\n    options: options,\n    dialog: dialog,\n  }\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowopendialogbrowserwindow-options\nmodule.exports.openDialog = function openDialog(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialog(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      if (returnCode != NSOKButton) {\n        return {\n          canceled: true,\n          filePaths: [],\n        }\n      }\n      var result = []\n      var urls = _dialog.URLs()\n      for (var k = 0; k < urls.length; k += 1) {\n        result.push(String(urls[k].path()))\n      }\n      return {\n        canceled: false,\n        filePaths: result,\n      }\n    },\n    setup.document\n  )\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowopendialogsyncbrowserwindow-options\nmodule.exports.openDialogSync = function openDialogSync(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialogSync(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      if (returnCode != NSOKButton) {\n        return []\n      }\n      var result = []\n      var urls = _dialog.URLs()\n      for (var k = 0; k < urls.length; k += 1) {\n        result.push(String(urls[k].path()))\n      }\n      return result\n    },\n    setup.document\n  )\n}\n","/* eslint-disable no-not-accumulator-reassign/no-not-accumulator-reassign */\nvar utils = require('./utils')\n\nfunction setupOptions(document, options) {\n  if (\n    !document ||\n    (typeof document.isKindOfClass !== 'function' && !document.sketchObject)\n  ) {\n    options = document\n    document = undefined\n  }\n  if (!options) {\n    options = {}\n  }\n\n  var dialog = NSSavePanel.savePanel()\n\n  if (options.title) {\n    dialog.title = options.title\n  }\n\n  if (options.defaultPath) {\n    // that's a path\n    dialog.setDirectoryURL(utils.getURL(options.defaultPath))\n\n    if (\n      options.defaultPath[0] === '.' ||\n      options.defaultPath[0] === '~' ||\n      options.defaultPath[0] === '/'\n    ) {\n      var parts = options.defaultPath.split('/')\n      if (parts.length > 1 && parts[parts.length - 1]) {\n        dialog.setNameFieldStringValue(parts[parts.length - 1])\n      }\n    } else {\n      dialog.setNameFieldStringValue(options.defaultPath)\n    }\n  }\n\n  if (options.buttonLabel) {\n    dialog.prompt = options.buttonLabel\n  }\n\n  if (options.filters && options.filters.length) {\n    var exts = []\n    options.filters.forEach(function setFilter(filter) {\n      filter.extensions.forEach(function setExtension(ext) {\n        exts.push(ext)\n      })\n    })\n\n    dialog.allowedFileTypes = exts\n  }\n\n  if (options.message) {\n    dialog.message = options.message\n  }\n\n  if (options.nameFieldLabel) {\n    dialog.nameFieldLabel = options.nameFieldLabel\n  }\n\n  if (options.showsTagField) {\n    dialog.showsTagField = options.showsTagField\n  }\n\n  return {\n    document: document,\n    options: options,\n    dialog: dialog,\n  }\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowsavedialogbrowserwindow-options\nmodule.exports.saveDialog = function saveDialog(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialog(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      return {\n        canceled: returnCode != NSOKButton,\n        filePath:\n          returnCode == NSOKButton ? String(_dialog.URL().path()) : undefined,\n      }\n    },\n    setup.document\n  )\n}\n\n// https://github.com/electron/electron/blob/master/docs/api/dialog.md#dialogshowsavedialogsyncbrowserwindow-options\nmodule.exports.saveDialogSync = function saveDialogSync(document, options) {\n  var setup = setupOptions(document, options)\n\n  return utils.runDialogSync(\n    setup.dialog,\n    function getResult(_dialog, returnCode) {\n      return returnCode == NSOKButton ? String(_dialog.URL().path()) : undefined\n    },\n    setup.document\n  )\n}\n","module.exports.getURL = function getURL(path) {\n  return NSURL.URLWithString(\n    String(\n      NSString.stringWithString(path).stringByExpandingTildeInPath()\n    ).replace(/ /g, '%20')\n  )\n}\n\nmodule.exports.runDialog = function runDialog(dialog, getResult, document) {\n  if (!document) {\n    var returnCode = dialog.runModal()\n    return Promise.resolve(getResult(dialog, returnCode))\n  }\n\n  var fiber = coscript.createFiber()\n\n  var window = (document.sketchObject || document).documentWindow()\n\n  return new Promise(function p(resolve, reject) {\n    dialog.beginSheetModalForWindow_completionHandler(\n      window,\n      __mocha__.createBlock_function('v16@?0q8', function onCompletion(\n        _returnCode\n      ) {\n        try {\n          resolve(getResult(dialog, _returnCode))\n        } catch (err) {\n          reject(err)\n        }\n        NSApp.endSheet(dialog)\n        if (fiber) {\n          fiber.cleanup()\n        } else {\n          coscript.shouldKeepAround = false\n        }\n      })\n    )\n  })\n}\n\nmodule.exports.runDialogSync = function runDialog(dialog, getResult, document) {\n  var returnCode\n\n  if (!document) {\n    returnCode = dialog.runModal()\n    return getResult(dialog, returnCode)\n  }\n\n  var window = (document.sketchObject || document).documentWindow()\n\n  dialog.beginSheetModalForWindow_completionHandler(\n    window,\n    __mocha__.createBlock_function('v16@?0q8', function onCompletion(\n      _returnCode\n    ) {\n      NSApp.stopModalWithCode(_returnCode)\n    })\n  )\n\n  returnCode = NSApp.runModalForWindow(window)\n  NSApp.endSheet(dialog)\n  return getResult(dialog, returnCode)\n}\n","// TODO: async. Should probably be done with NSFileHandle and some notifications\n// TODO: file descriptor. Needs to be done with NSFileHandle\n\nmodule.exports.constants = {\n  F_OK: 0,\n  R_OK: 4,\n  W_OK: 2,\n  X_OK: 1\n}\n\nmodule.exports.accessSync = function(path, mode) {\n  mode = mode | 0\n  var fileManager = NSFileManager.defaultManager()\n\n  switch (mode) {\n    case 0:\n      return module.exports.existsSync(path)\n    case 1:\n      return Boolean(fileManager.isExecutableFileAtPath(path))\n    case 2:\n      return Boolean(fileManager.isWritableFileAtPath(path))\n    case 3:\n      return Boolean(fileManager.isExecutableFileAtPath(path) && fileManager.isWritableFileAtPath(path))\n    case 4:\n      return Boolean(fileManager.isReadableFileAtPath(path))\n    case 5:\n      return Boolean(fileManager.isReadableFileAtPath(path) && fileManager.isExecutableFileAtPath(path))\n    case 6:\n      return Boolean(fileManager.isReadableFileAtPath(path) && fileManager.isWritableFileAtPath(path))\n    case 7:\n      return Boolean(fileManager.isReadableFileAtPath(path) && fileManager.isWritableFileAtPath(path) && fileManager.isExecutableFileAtPath(path))\n  }\n}\n\nmodule.exports.appendFileSync = function(file, data, options) {\n  if (!module.exports.existsSync(file)) {\n    return module.exports.writeFileSync(file, data, options)\n  }\n\n  var handle = NSFileHandle.fileHandleForWritingAtPath(file)\n  handle.seekToEndOfFile()\n\n  if (data && data.mocha && data.mocha().class() === 'NSData') {\n    handle.writeData(data)\n    return\n  }\n\n  var encoding = options && options.encoding ? options.encoding : (options ? options : 'utf8')\n\n  var string = NSString.stringWithString(data)\n  var nsdata\n\n  switch (encoding) {\n    case 'utf8':\n      nsdata = string.dataUsingEncoding(NSUTF8StringEncoding)\n      break\n    case 'ascii':\n      nsdata = string.dataUsingEncoding(NSASCIIStringEncoding)\n      break\n    case 'utf16le':\n    case 'ucs2':\n      nsdata = string.dataUsingEncoding(NSUTF16LittleEndianStringEncoding)\n      break\n    case 'base64':\n      var plainData = string.dataUsingEncoding(NSUTF8StringEncoding)\n      nsdata = plainData.base64EncodedStringWithOptions(0).dataUsingEncoding(NSUTF8StringEncoding)\n      break\n    case 'latin1':\n    case 'binary':\n      nsdata = string.dataUsingEncoding(NSISOLatin1StringEncoding)\n      break\n    case 'hex':\n      // TODO: how?\n    default:\n      nsdata = string.dataUsingEncoding(NSUTF8StringEncoding)\n      break\n  }\n\n  handle.writeData(data)\n}\n\nmodule.exports.chmodSync = function(path, mode) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.setAttributes_ofItemAtPath_error({\n    NSFilePosixPermissions: mode\n  }, path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.copyFileSync = function(path, dest, flags) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.copyItemAtPath_toPath_error(path, dest, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.existsSync = function(path) {\n  var fileManager = NSFileManager.defaultManager()\n  return Boolean(fileManager.fileExistsAtPath(path))\n}\n\nmodule.exports.linkSync = function(existingPath, newPath) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.linkItemAtPath_toPath_error(existingPath, newPath, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.mkdirSync = function(path, mode) {\n  mode = mode || 0o777\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error(path, false, {\n    NSFilePosixPermissions: mode\n  }, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.mkdtempSync = function(path) {\n  function makeid() {\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for (var i = 0; i < 6; i++)\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n    return text;\n  }\n  var tempPath = path + makeid()\n  module.exports.mkdirSync(tempPath)\n  return tempPath\n}\n\nmodule.exports.readdirSync = function(path) {\n  var fileManager = NSFileManager.defaultManager()\n  var paths = fileManager.subpathsAtPath(path)\n  var arr = []\n  for (var i = 0; i < paths.length; i++) {\n    arr.push(paths[i])\n  }\n  return arr\n}\n\nmodule.exports.readFileSync = function(path, options) {\n  var encoding = options && options.encoding ? options.encoding : (options ? options : 'buffer')\n  var fileManager = NSFileManager.defaultManager()\n  var data = fileManager.contentsAtPath(path)\n  switch (encoding) {\n    case 'utf8':\n      return String(NSString.alloc().initWithData_encoding(data, NSUTF8StringEncoding))\n    case 'ascii':\n      return String(NSString.alloc().initWithData_encoding(data, NSASCIIStringEncoding))\n    case 'utf16le':\n    case 'ucs2':\n      return String(NSString.alloc().initWithData_encoding(data, NSUTF16LittleEndianStringEncoding))\n    case 'base64':\n      var nsdataDecoded = NSData.alloc().initWithBase64EncodedData_options(data, 0)\n      return String(NSString.alloc().initWithData_encoding(nsdataDecoded, NSUTF8StringEncoding))\n    case 'latin1':\n    case 'binary':\n      return String(NSString.alloc().initWithData_encoding(data, NSISOLatin1StringEncoding))\n    case 'hex':\n      // TODO: how?\n      return data\n    default:\n      return data\n  }\n}\n\nmodule.exports.readlinkSync = function(path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.destinationOfSymbolicLinkAtPath_error(path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n\n  return result\n}\n\nmodule.exports.realpathSync = function(path) {\n  return NSString.stringByResolvingSymlinksInPath(path)\n}\n\nmodule.exports.renameSync = function(oldPath, newPath) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.moveItemAtPath_toPath_error(oldPath, newPath, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.rmdirSync = function(path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  fileManager.removeItemAtPath_error(path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.statSync = function(path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.attributesOfItemAtPath_error(path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n\n  return {\n    dev: String(result.NSFileDeviceIdentifier),\n    // ino: 48064969, The file system specific \"Inode\" number for the file.\n    mode: result.NSFileType | result.NSFilePosixPermissions,\n    nlink: Number(result.NSFileReferenceCount),\n    uid: String(result.NSFileOwnerAccountID),\n    gid: String(result.NSFileGroupOwnerAccountID),\n    // rdev: 0, A numeric device identifier if the file is considered \"special\".\n    size: Number(result.NSFileSize),\n    // blksize: 4096, The file system block size for i/o operations.\n    // blocks: 8, The number of blocks allocated for this file.\n    atimeMs: Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000,\n    mtimeMs: Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000,\n    ctimeMs: Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000,\n    birthtimeMs: Number(result.NSFileCreationDate.timeIntervalSince1970()) * 1000,\n    atime: new Date(Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000 + 0.5), // the 0.5 comes from the node source. Not sure why it's added but in doubt...\n    mtime: new Date(Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000 + 0.5),\n    ctime: new Date(Number(result.NSFileModificationDate.timeIntervalSince1970()) * 1000 + 0.5),\n    birthtime: new Date(Number(result.NSFileCreationDate.timeIntervalSince1970()) * 1000 + 0.5),\n    isBlockDevice: function() { return result.NSFileType === NSFileTypeBlockSpecial },\n    isCharacterDevice: function() { return result.NSFileType === NSFileTypeCharacterSpecial },\n    isDirectory: function() { return result.NSFileType === NSFileTypeDirectory },\n    isFIFO: function() { return false },\n    isFile: function() { return result.NSFileType === NSFileTypeRegular },\n    isSocket: function() { return result.NSFileType === NSFileTypeSocket },\n    isSymbolicLink: function() { return result.NSFileType === NSFileTypeSymbolicLink },\n  }\n}\n\nmodule.exports.symlinkSync = function(target, path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.createSymbolicLinkAtPath_withDestinationPath_error(path, target, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.truncateSync = function(path, len) {\n  var hFile = NSFileHandle.fileHandleForUpdatingAtPath(sFilePath)\n  hFile.truncateFileAtOffset(len || 0)\n  hFile.closeFile()\n}\n\nmodule.exports.unlinkSync = function(path) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.removeItemAtPath_error(path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.utimesSync = function(path, aTime, mTime) {\n  var err = MOPointer.alloc().init()\n  var fileManager = NSFileManager.defaultManager()\n  var result = fileManager.setAttributes_ofItemAtPath_error({\n    NSFileModificationDate: aTime\n  }, path, err)\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n\nmodule.exports.writeFileSync = function(path, data, options) {\n  var encoding = options && options.encoding ? options.encoding : (options ? options : 'utf8')\n\n  if (data && data.mocha && data.mocha().class() === 'NSData') {\n    data.writeToFile_atomically(path, true)\n    return\n  }\n\n  var err = MOPointer.alloc().init()\n  var string = NSString.stringWithString(data)\n\n  switch (encoding) {\n    case 'utf8':\n      string.writeToFile_atomically_encoding_error(path, true, NSUTF8StringEncoding, err)\n      break\n    case 'ascii':\n      string.writeToFile_atomically_encoding_error(path, true, NSASCIIStringEncoding, err)\n      break\n    case 'utf16le':\n    case 'ucs2':\n      string.writeToFile_atomically_encoding_error(path, true, NSUTF16LittleEndianStringEncoding, err)\n      break\n    case 'base64':\n      var plainData = string.dataUsingEncoding(NSUTF8StringEncoding)\n      var nsdataEncoded = plainData.base64EncodedStringWithOptions(0)\n      nsdataEncoded.writeToFile_atomically(path, true)\n      break\n    case 'latin1':\n    case 'binary':\n      string.writeToFile_atomically_encoding_error(path, true, NSISOLatin1StringEncoding, err)\n      break\n    case 'hex':\n      // TODO: how?\n    default:\n      string.writeToFile_atomically_encoding_error(path, true, NSUTF8StringEncoding, err)\n      break\n  }\n\n  if (err.value() !== null) {\n    throw new Error(err.value())\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar sketchSpecifics = require('./sketch-specifics')\n\n// we only expose the posix implementation since Sketch only runs on macOS\n\nvar CHAR_FORWARD_SLASH = 47\nvar CHAR_DOT = 46\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeString(path, allowAboveRoot) {\n  var res = ''\n  var lastSegmentLength = 0\n  var lastSlash = -1\n  var dots = 0\n  var code\n  for (var i = 0; i <= path.length; i += 1) {\n    if (i < path.length) code = path.charCodeAt(i)\n    else if (code === CHAR_FORWARD_SLASH) break\n    else code = CHAR_FORWARD_SLASH\n    if (code === CHAR_FORWARD_SLASH) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (\n          res.length < 2 ||\n          lastSegmentLength !== 2 ||\n          res.charCodeAt(res.length - 1) !== CHAR_DOT ||\n          res.charCodeAt(res.length - 2) !== CHAR_DOT\n        ) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/')\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = ''\n                lastSegmentLength = 0\n              } else {\n                res = res.slice(0, lastSlashIndex)\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/')\n              }\n              lastSlash = i\n              dots = 0\n              continue\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = ''\n            lastSegmentLength = 0\n            lastSlash = i\n            dots = 0\n            continue\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0) res += '/..'\n          else res = '..'\n          lastSegmentLength = 2\n        }\n      } else {\n        if (res.length > 0) res += '/' + path.slice(lastSlash + 1, i)\n        else res = path.slice(lastSlash + 1, i)\n        lastSegmentLength = i - lastSlash - 1\n      }\n      lastSlash = i\n      dots = 0\n    } else if (code === CHAR_DOT && dots !== -1) {\n      ++dots\n    } else {\n      dots = -1\n    }\n  }\n  return res\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root\n  var base =\n    pathObject.base || (pathObject.name || '') + (pathObject.ext || '')\n  if (!dir) {\n    return base\n  }\n  if (dir === pathObject.root) {\n    return dir + base\n  }\n  return dir + sep + base\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = ''\n    var resolvedAbsolute = false\n    var cwd\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i -= 1) {\n      var path\n      if (i >= 0) {\n        path = arguments[i]\n      } else {\n        if (cwd === undefined) {\n          cwd = posix.dirname(sketchSpecifics.cwd())\n        }\n        path = cwd\n      }\n\n      path = sketchSpecifics.getString(path, 'path')\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue\n      }\n\n      resolvedPath = path + '/' + resolvedPath\n      resolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeString(resolvedPath, !resolvedAbsolute)\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0) return '/' + resolvedPath\n      else return '/'\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath\n    } else {\n      return '.'\n    }\n  },\n\n  normalize: function normalize(path) {\n    path = sketchSpecifics.getString(path, 'path')\n\n    if (path.length === 0) return '.'\n\n    var isAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH\n    var trailingSeparator =\n      path.charCodeAt(path.length - 1) === CHAR_FORWARD_SLASH\n\n    // Normalize the path\n    path = normalizeString(path, !isAbsolute)\n\n    if (path.length === 0 && !isAbsolute) path = '.'\n    if (path.length > 0 && trailingSeparator) path += '/'\n\n    if (isAbsolute) return '/' + path\n    return path\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    path = sketchSpecifics.getString(path, 'path')\n    return path.length > 0 && path.charCodeAt(0) === CHAR_FORWARD_SLASH\n  },\n\n  join: function join() {\n    if (arguments.length === 0) return '.'\n    var joined\n    for (var i = 0; i < arguments.length; i += 1) {\n      var arg = arguments[i]\n      arg = sketchSpecifics.getString(arg, 'path')\n      if (arg.length > 0) {\n        if (joined === undefined) joined = arg\n        else joined += '/' + arg\n      }\n    }\n    if (joined === undefined) return '.'\n    return posix.normalize(joined)\n  },\n\n  relative: function relative(from, to) {\n    from = sketchSpecifics.getString(from, 'from path')\n    to = sketchSpecifics.getString(to, 'to path')\n\n    if (from === to) return ''\n\n    from = posix.resolve(from)\n    to = posix.resolve(to)\n\n    if (from === to) return ''\n\n    // Trim any leading backslashes\n    var fromStart = 1\n    for (; fromStart < from.length; fromStart += 1) {\n      if (from.charCodeAt(fromStart) !== CHAR_FORWARD_SLASH) break\n    }\n    var fromEnd = from.length\n    var fromLen = fromEnd - fromStart\n\n    // Trim any leading backslashes\n    var toStart = 1\n    for (; toStart < to.length; toStart += 1) {\n      if (to.charCodeAt(toStart) !== CHAR_FORWARD_SLASH) break\n    }\n    var toEnd = to.length\n    var toLen = toEnd - toStart\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen\n    var lastCommonSep = -1\n    var i = 0\n    for (; i <= length; i += 1) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === CHAR_FORWARD_SLASH) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1)\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i)\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === CHAR_FORWARD_SLASH) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0\n          }\n        }\n        break\n      }\n      var fromCode = from.charCodeAt(fromStart + i)\n      var toCode = to.charCodeAt(toStart + i)\n      if (fromCode !== toCode) break\n      else if (fromCode === CHAR_FORWARD_SLASH) lastCommonSep = i\n    }\n\n    var out = ''\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; i += 1) {\n      if (i === fromEnd || from.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n        if (out.length === 0) out += '..'\n        else out += '/..'\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0) return out + to.slice(toStart + lastCommonSep)\n    else {\n      toStart += lastCommonSep\n      if (to.charCodeAt(toStart) === CHAR_FORWARD_SLASH) toStart += 1\n      return to.slice(toStart)\n    }\n  },\n\n  toNamespacedPath: function toNamespacedPath(path) {\n    // Non-op on posix systems\n    return path\n  },\n\n  dirname: function dirname(path) {\n    path = sketchSpecifics.getString(path, 'path')\n    if (path.length === 0) return '.'\n    var code = path.charCodeAt(0)\n    var hasRoot = code === CHAR_FORWARD_SLASH\n    var end = -1\n    var matchedSlash = true\n    for (var i = path.length - 1; i >= 1; i -= 1) {\n      code = path.charCodeAt(i)\n      if (code === CHAR_FORWARD_SLASH) {\n        if (!matchedSlash) {\n          end = i\n          break\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.'\n    if (hasRoot && end === 1) return '//'\n    return path.slice(0, end)\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined)\n      ext = sketchSpecifics.getString(ext, 'ext')\n    path = sketchSpecifics.getString(path, 'path')\n\n    var start = 0\n    var end = -1\n    var matchedSlash = true\n    var i\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return ''\n      var extIdx = ext.length - 1\n      var firstNonSlashEnd = -1\n      for (i = path.length - 1; i >= 0; i -= 1) {\n        var code = path.charCodeAt(i)\n        if (code === CHAR_FORWARD_SLASH) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1\n            break\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false\n            firstNonSlashEnd = i + 1\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1\n              end = firstNonSlashEnd\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd\n      else if (end === -1) end = path.length\n      return path.slice(start, end)\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1\n            break\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false\n          end = i + 1\n        }\n      }\n\n      if (end === -1) return ''\n      return path.slice(start, end)\n    }\n  },\n\n  extname: function extname(path) {\n    path = sketchSpecifics.getString(path, 'path')\n    var startDot = -1\n    var startPart = 0\n    var end = -1\n    var matchedSlash = true\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i)\n      if (code === CHAR_FORWARD_SLASH) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1\n          break\n        }\n        continue\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false\n        end = i + 1\n      }\n      if (code === CHAR_DOT) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) startDot = i\n        else if (preDotState !== 1) preDotState = 1\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1\n      }\n    }\n\n    if (\n      startDot === -1 ||\n      end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n    ) {\n      return ''\n    }\n    return path.slice(startDot, end)\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new Error('pathObject should be an Object')\n    }\n    return _format('/', pathObject)\n  },\n\n  parse: function parse(path) {\n    path = sketchSpecifics.getString(path, 'path')\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' }\n    if (path.length === 0) return ret\n    var code = path.charCodeAt(0)\n    var isAbsolute = code === CHAR_FORWARD_SLASH\n    var start\n    if (isAbsolute) {\n      ret.root = '/'\n      start = 1\n    } else {\n      start = 0\n    }\n    var startDot = -1\n    var startPart = 0\n    var end = -1\n    var matchedSlash = true\n    var i = path.length - 1\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i)\n      if (code === CHAR_FORWARD_SLASH) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1\n          break\n        }\n        continue\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false\n        end = i + 1\n      }\n      if (code === CHAR_DOT) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) startDot = i\n        else if (preDotState !== 1) preDotState = 1\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1\n      }\n    }\n\n    if (\n      startDot === -1 ||\n      end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n    ) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path.slice(1, end)\n        else ret.base = ret.name = path.slice(startPart, end)\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot)\n        ret.base = path.slice(1, end)\n      } else {\n        ret.name = path.slice(startPart, startDot)\n        ret.base = path.slice(startPart, end)\n      }\n      ret.ext = path.slice(startDot, end)\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1)\n    else if (isAbsolute) ret.dir = '/'\n\n    return ret\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null,\n\n  resourcePath: sketchSpecifics.resourcePath,\n}\n\nmodule.exports = posix\nmodule.exports.posix = posix\n","var util = require('util')\n\nmodule.exports.getString = function getString(path, argumentName) {\n  if (!util.isString(path)) {\n    // let's make a special case for NSURL\n    if (util.getNativeClass(path) === 'NSURL') {\n      return String(path.path().copy())\n    }\n    throw new Error(argumentName + ' should be a string. Got ' + typeof path + ' instead.')\n  }\n  return String(path)\n}\n\nmodule.exports.cwd = function cwd() {\n  if (typeof __command !== 'undefined' && __command.script() && __command.script().URL()) {\n    return String(__command.script().URL().path().copy())\n  }\n  return String(MSPluginManager.defaultPluginURL().path().copy())\n}\n\nmodule.exports.resourcePath = function resourcePath(resourceName) {\n  if (typeof __command === 'undefined' || !__command.pluginBundle()) {\n    return undefined\n  }\n  var resource = __command.pluginBundle().urlForResourceNamed(resourceName)\n  if (!resource) {\n    return undefined\n  }\n  return String(resource.path())\n}\n","/* from https://github.com/taylorhakes/promise-polyfill */\n\nfunction promiseFinally(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nfunction noop() {}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError(\"Promises must be constructed via new\");\n  if (typeof fn !== \"function\") throw new TypeError(\"not a function\");\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError(\"A promise cannot be resolved with itself.\");\n    if (\n      newValue &&\n      (typeof newValue === \"object\" || typeof newValue === \"function\")\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === \"function\") {\n        doResolve(then.bind(newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value, self);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === \"function\" ? onFulfilled : null;\n  this.onRejected = typeof onRejected === \"function\" ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) {\n          Promise._multipleResolvesFn(\"resolve\", self, value);\n          return;\n        }\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) {\n          Promise._multipleResolvesFn(\"reject\", self, reason);\n          return;\n        }\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) {\n      Promise._multipleResolvesFn(\"reject\", self, ex);\n      return;\n    }\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype[\"catch\"] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype[\"finally\"] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!Array.isArray(arr)) {\n      return reject(new TypeError(\"Promise.all accepts an array\"));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === \"object\" || typeof val === \"function\")) {\n          var then = val.then;\n          if (typeof then === \"function\") {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === \"object\" && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!Array.isArray(arr)) {\n      return reject(new TypeError(\"Promise.race accepts an array\"));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn = setImmediate;\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err, promise) {\n  if (\n    typeof process !== \"undefined\" &&\n    process.listenerCount &&\n    (process.listenerCount(\"unhandledRejection\") ||\n      process.listenerCount(\"uncaughtException\"))\n  ) {\n    process.emit(\"unhandledRejection\", err, promise);\n    process.emit(\"uncaughtException\", err, \"unhandledRejection\");\n  } else if (typeof console !== \"undefined\" && console) {\n    console.warn(\"Possible Unhandled Promise Rejection:\", err);\n  }\n};\n\nPromise._multipleResolvesFn = function _multipleResolvesFn(\n  type,\n  promise,\n  value\n) {\n  if (typeof process !== \"undefined\" && process.emit) {\n    process.emit(\"multipleResolves\", type, promise, value);\n  }\n};\n\nmodule.exports = Promise;\n","/*\n  change for npm modules.\n  by Luiz Estácio.\n\n  json-format v.1.1\n  http://github.com/phoboslab/json-format\n\n  Released under MIT license:\n  http://www.opensource.org/licenses/mit-license.php\n*/\nvar p = [],\n  indentConfig = {\n    tab: { char: '\\t', size: 1 },\n    space: { char: ' ', size: 4 }\n  },\n  configDefault = {\n    type: 'tab'\n  },\n  push = function( m ) { return '\\\\' + p.push( m ) + '\\\\'; },\n  pop = function( m, i ) { return p[i-1] },\n  tabs = function( count, indentType) { return new Array( count + 1 ).join( indentType ); };\n\nfunction JSONFormat ( json, indentType ) {\n  p = [];\n  var out = \"\",\n      indent = 0;\n\n  // Extract backslashes and strings\n  json = json\n    .replace( /\\\\./g, push )\n    .replace( /(\".*?\"|'.*?')/g, push )\n    .replace( /\\s+/, '' );    \n\n  // Indent and insert newlines\n  for( var i = 0; i < json.length; i++ ) {\n    var c = json.charAt(i);\n\n    switch(c) {\n      case '{':\n      case '[':\n        out += c + \"\\n\" + tabs(++indent, indentType);\n        break;\n      case '}':\n      case ']':\n        out += \"\\n\" + tabs(--indent, indentType) + c;\n        break;\n      case ',':\n        out += \",\\n\" + tabs(indent, indentType);\n        break;\n      case ':':\n        out += \": \";\n        break;\n      default:\n        out += c;\n        break;      \n    }         \n  }\n\n  // Strip whitespace from numeric arrays and put backslashes \n  // and strings back in\n  out = out\n    .replace( /\\[[\\d,\\s]+?\\]/g, function(m){ return m.replace(/\\s/g,''); } )\n    .replace( /\\\\(\\d+)\\\\/g, pop ) // strings\n    .replace( /\\\\(\\d+)\\\\/g, pop ); // backslashes in strings\n\n  return out;\n};\n\nmodule.exports = function(json, config){\n  config = config || configDefault;\n  var indent = indentConfig[config.type];\n\n  if ( indent == null ) {\n    throw new Error('Unrecognized indent type: \"' + config.type + '\"');\n  }\n  var indentType = new Array((config.size || indent.size) + 1).join(indent.char);\n  return JSONFormat(JSON.stringify(json), indentType);\n}\n","\nimport dom from \"sketch/dom\";\nimport UI from \"sketch/ui\";\n\nfunction convertSketchColourToRGBA(colour) {\n  const red = Math.round(colour.red() * 255);\n  const green = Math.round(colour.green() * 255);\n  const blue = Math.round(colour.blue() * 255);\n  return \"rgba(\" + red + \",\" + green + \",\" + blue + \",\" + colour.alpha() + \")\";\n}\n\nexport function extractStyles(context, convert) {\n  const doc = context.document;\n  const pages = doc.pages();\n\n  // we need to check if we have all the pages\n  let pagesExist = {\n    alignments: false,\n    colors: false,\n    styles: false\n  };\n\n  // arrays and objects for our styles\n  let TypographyStyles = [];\n  let DocumentColours = {};\n  let textAlignments = [];\n\n  pages.forEach(page => {\n    //  alignments\n    if (String(page.name()) === \"Alignments\") {\n      // page exists set to true\n      pagesExist.alignments = true;\n\n      page.layers().forEach(layer => {\n        //log(layer.name() + ' ' + layer.textAlignment())\n        let alignment = \"left\";\n        if (layer.textAlignment() === 4) alignment = \"left\";\n        if (layer.textAlignment() === 2) alignment = \"center\";\n        if (layer.textAlignment() === 1) alignment = \"right\";\n        textAlignments.push(alignment);\n      });\n    }\n\n    // page styles\n    if (String(page.name()) === \"Styles\") {\n      // page exists set to true\n      pagesExist.styles = true;\n\n      // get styles\n      page.layers().forEach(layer => {\n        if (layer.class() === MSTextLayer) {\n          // log(layer.font().fontName())\n          // log(layer.fontSize())\n          // log(layer.lineHeight())\n          // log(layer.characterSpacing())\n          // log(layer.style().textStyle().encodedAttributes() )\n          //log(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])\n          let textTransform = \"none\";\n\n          if (\n            String(\n              layer.styleAttributes()[\n                \"MSAttributedStringTextTransformAttribute\"\n              ]\n            ) === \"1\"\n          )\n            textTransform = \"uppercase\"; //  null: none, 1: uppercase and 2 lowercase\n          if (\n            String(\n              layer.styleAttributes()[\n                \"MSAttributedStringTextTransformAttribute\"\n              ]\n            ) === \"2\"\n          )\n            textTransform = \"lowercase\";\n\n          // console.log( String(layer.name()) +  \" \" +  layer.font().fontName() + \" \"  + dom.fromNative(layer).style.fontWeight + \" \" +  dom.fromNative(layer).style.fontStyle  )\n          // console.log(\"-----\" )\n\n          // fontFamily : dom.fromNative(layer).style.fontFamily ,\n          // fontWeight : dom.fromNative(layer).style.fontWeight ,\n          //console.log(dom.fromNative(layer).style.fontStyle)\n          //console.log(dom.fromNative(layer).style.borders)\n\n         \n          TypographyStyles.push({\n            name: String(layer.name()),\n            styles: {\n              fontFamily: dom.fromNative(layer).style.fontFamily,\n              fontWeight: convert\n                ? dom.fromNative(layer).style.fontWeight * 100\n                : dom.fromNative(layer).style.fontWeight,\n              fontSize: layer.fontSize() + (convert ? \"px\" : \"\"),\n              lineHeight: layer.lineHeight() + (convert ? \"px\" : \"\"),\n              fontStyle:\n                dom.fromNative(layer).style.fontStyle != undefined\n                  ? dom.fromNative(layer).style.fontStyle\n                  : \"normal\",\n              paragraphSpacing: dom.fromNative(layer).style.paragraphSpacing,\n              ...(convert && {\n                letterSpacing: String(layer.characterSpacing() / 10 + \"em\")\n              }),\n              ...(!convert && { kerning: layer.characterSpacing() }),\n              textTransform: textTransform,\n              borders: dom.fromNative(layer).style.borders || []\n            },\n            alignments: textAlignments,\n            adjustments: []\n          });\n        }\n      });\n    }\n\n    // get colours\n    if (String(page.name()) === \"Colours\" || String(page.name()) === \"Colors\") {\n      // page exists set to true\n      pagesExist.colors = true;\n\n      DocumentColours = {};\n      page.layers().forEach(layer => {\n        DocumentColours[layer.name()] = convert\n          ? convertSketchColourToRGBA(\n              layer\n                .style()\n                .firstEnabledFill()\n                .color()\n            )\n          : layer\n              .style()\n              .firstEnabledFill()\n              .color();\n      });\n    }\n  });\n\n\n  let allPagesHere = true;\n  let messages = [];\n\n  // first check for pages\n  if (!pagesExist.alignments) {\n    messages.push('Your document is missing the page named \"Alignments\".');\n    allPagesHere = false;\n  }\n\n  if (!pagesExist.colors) {\n    messages.push('Your document is missing the page named \"Colors\". ');\n    allPagesHere = false;\n  }\n\n  if (!pagesExist.styles) {\n    messages.push('Your document is missing the page named \"Styles\".');\n    allPagesHere = false;\n  }\n\n  // now that we have checked for pages, lets see if there is anything in them\n  if (pagesExist.alignments && textAlignments.length === 0) {\n    messages.push(\"Your alignments page has no alignments in it.\");\n    allPagesHere = false;\n  }\n\n  if (pagesExist.colors && Object.keys(DocumentColours).length === 0) {\n    messages.push(\"Your colors page has no colors in it.\");\n    allPagesHere = false;\n  }\n\n  if (pagesExist.styles && TypographyStyles.length === 0) {\n    messages.push(\"Your styles page has no styles in it.\");\n    allPagesHere = false;\n  }\n\n  let messageString = \"\";\n  messages.forEach(message => {\n    messageString += message + \"\\n\";\n  });\n\n  if (!allPagesHere) UI.alert(\"Unable to render styles\", messageString);\n\n  const DesignSystemTokens = {\n    colours: DocumentColours,\n    typography: TypographyStyles,\n    textAlignments: textAlignments,\n    render: allPagesHere\n  };\n\n  return DesignSystemTokens;\n}\n\nexport function generateTextStyles(json) {\n  // can we calculate this beforehand?\n  let typeStyles = new Array();\n\n  json.typography.forEach(item => {\n    Object.keys(json.colours).forEach(colour => {\n      item.alignments.map((align, index) => {\n        // this splits at a slash and adds the adjustments for breakpoints after the alignment\n        // assumption is that there is only one adjusment\n        let name = item.name.split(\"/\");\n        typeStyles.push({\n          name: `${name[0]}/${colour}/${index +\n            \"_\" +\n            align +\n            (name.length > 1 ? \"/\" + name[1] : \"\")}`,\n          style: {\n            textColor: dom.Style.colorToString(json.colours[colour]),\n            alignment: align,\n            ...item.styles\n          }\n        });\n      });\n    });\n  });\n\n  return typeStyles;\n}\n\nfunction checkMatch(baseStyle, newStyle, prop) {\n  let value = true;\n\n  // for now we are just going off the previous style. As this would need to check\n  // every prop across every adjustment :/\n  if (JSON.stringify(baseStyle[prop]) === JSON.stringify(newStyle[prop])) {\n    // very primitive and breaks if order is out of sync\n    value = false;\n  }\n\n  //log( prop + ' ' + baseStyle[prop] + ' ----- ' + prop  + ' ' +newStyle[prop] + '  value ' + value)\n\n  return value;\n}\n\nexport function generateJSONStyles(json, arrayFormat) {\n  let typeStyles = {};\n  let refinedBreakpoints = [];\n  //log(json.typography)\n  json.typography.forEach(item => {\n    let name = item.name.split(\"/\");\n    if (!typeStyles[name[0]]) {\n      typeStyles[name[0]] = {\n        name: name[0],\n        styles: item.styles,\n        alignments: item.alignments,\n        adjustments: []\n      };\n    } else {\n      let currentStyle = item.styles;\n      //let previousStyle = typeStyles[name[0]].styles\n      // work out previous style\n      const adjustmentLength = typeStyles[name[0]].adjustments.length;\n      refinedBreakpoints[adjustmentLength] = { name: name[1], styles: {} };\n\n      // if(adjustmentLength>0){\n      //     previousStyle = typeStyles[name[0]].adjustments[adjustmentLength-1]\n      // }\n\n      //previousStyle,\n      Object.keys(currentStyle).map(checked => {\n        if (checkMatch(typeStyles[name[0]].styles, currentStyle, checked)) {\n          refinedBreakpoints[adjustmentLength].styles[checked] =\n            currentStyle[checked];\n        }\n      });\n\n      typeStyles[name[0]].adjustments.push(\n        refinedBreakpoints[adjustmentLength]\n      );\n    }\n  });\n\n  // finally merge colours back in and return text to an array\n  let formattedTokens = {\n    colours: json.colours,\n    typography: arrayFormat\n      ? Object.keys(typeStyles).map(function(key) {\n          return typeStyles[key];\n        })\n      : typeStyles\n  };\n  return formattedTokens;\n}\n","import dialog from \"@skpm/dialog\";\nimport path from \"@skpm/path\";\nimport fs from \"@skpm/fs\";\nimport jsonFormat from \"json-format\";\nimport Sketch from \"sketch\";\n\nimport { extractStyles, generateJSONStyles } from \"./generators\";\n\nfunction save(filename, fileContents) {\n  console.log(filename)\n\n  const targetFile = path.resolve(filename);\n  fs.writeFileSync(targetFile, fileContents, \"utf8\");\n}\n\nexport default function(context) {\n  const doc = context.document;\n\n  // ok lets get the styles\n\n  const designTokens = extractStyles(context, true);\n\n  if (designTokens.render) {\n    const options = [\"Array\", \"Object\"];\n    const textSaveSelection = Sketch.UI.getInputFromUser(\n      \"Would you like the text styles as an Array or Object\",\n      {\n        type: Sketch.UI.INPUT_TYPE.selection,\n        possibleValues: options\n      },\n      (err, value) => {\n        if (err) {\n          // most likely the user canceled the input\n          return;\n        } else {\n          if (value[2]) {\n            let textSaveMethod = true;\n            if (value === \"Object\") textSaveMethod = false;\n            if (value === \"Array\") textSaveMethod = true;\n            const arranged = generateJSONStyles(designTokens, textSaveMethod);\n\n            // Save the file\n            let saveDialog = dialog.showSaveDialog(\n              doc,\n              {\n                defaultPath: \"tokens.json\",\n                message: \"Choose a folder to save your tokens\"\n              }\n            ).then( result => {\n               if(!result.cancelled) save(result.filePath, jsonFormat(arranged));\n            });\n\n\n          }\n        }\n      }\n    );\n  } else {\n    context.document.showMessage('No styles rendered. Check your document setup. Documentation here https://github.com/tbrasington/text-to-styles');\n  }\n}\n","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/ui\");","module.exports = require(\"util\");"],"sourceRoot":""}