{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/generators.js","webpack://exports/./src/renderStyles.js","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/ui\""],"names":["convertSketchColourToRGBA","colour","red","Math","round","green","blue","alpha","extractStyles","context","convert","doc","document","pages","pagesExist","alignments","colors","styles","TypographyStyles","DocumentColours","textAlignments","forEach","page","String","name","layers","layer","alignment","textAlignment","push","class","MSTextLayer","textTransform","styleAttributes","fontFamily","dom","fromNative","style","fontWeight","fontSize","lineHeight","fontStyle","undefined","paragraphSpacing","letterSpacing","characterSpacing","kerning","borders","adjustments","firstEnabledFill","color","index","length","documentData","removePageAtIndex","allPagesHere","messages","Object","keys","messageString","message","UI","alert","DesignSystemTokens","colours","typography","render","generateTextStyles","json","typeStyles","Array","item","map","align","split","textColor","Style","colorToString","checkMatch","baseStyle","newStyle","prop","value","JSON","stringify","generateJSONStyles","arrayFormat","refinedBreakpoints","currentStyle","adjustmentLength","checked","formattedTokens","key","console","log","designTokens","textStyles","RenderPage","addBlankPage","sketch","stored_styles","l","property","styleName","checkStyle","sharedTextStyles","find","Text","previousFrame","stl","textLayer","text","parent","frame","width","height","x","y","ceil","sharedStyleId","id","showMessage"],"mappings":"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","file":"renderStyles.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/renderStyles.js\");\n","import dom from \"sketch/dom\";\n\nimport UI from \"sketch/ui\";\n\nfunction convertSketchColourToRGBA(colour) {\n  const red = Math.round(colour.red() * 255);\n  const green = Math.round(colour.green() * 255);\n  const blue = Math.round(colour.blue() * 255);\n  return \"rgba(\" + red + \",\" + green + \",\" + blue + \",\" + colour.alpha() + \")\";\n}\n\nexport function extractStyles(context, convert) {\n  const doc = context.document;\n  const pages = doc.pages();\n\n  // we need to check if we have all the pages\n  let pagesExist = {\n    alignments: false,\n    colors: false,\n    styles: false\n  };\n\n  // arrays and objects for our styles\n  let TypographyStyles = [];\n  let DocumentColours = {};\n  let textAlignments = [];\n\n  pages.forEach(page => {\n    //  alignments\n    if (String(page.name()) === \"Alignments\") {\n      // page exists set to true\n      pagesExist.alignments = true;\n\n      page.layers().forEach(layer => {\n        //log(layer.name() + ' ' + layer.textAlignment())\n        let alignment = \"left\";\n        if (layer.textAlignment() === 4) alignment = \"left\";\n        if (layer.textAlignment() === 2) alignment = \"center\";\n        if (layer.textAlignment() === 1) alignment = \"right\";\n        textAlignments.push(alignment);\n      });\n    }\n\n    // page styles\n    if (String(page.name()) === \"Styles\") {\n      // page exists set to true\n      pagesExist.styles = true;\n\n      // get styles\n      page.layers().forEach(layer => {\n        if (layer.class() === MSTextLayer) {\n          // log(layer.font().fontName())\n          // log(layer.fontSize())\n          // log(layer.lineHeight())\n          // log(layer.characterSpacing())\n          // log(layer.style().textStyle().encodedAttributes() )\n          //log(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])\n          let textTransform = \"none\";\n\n          if (\n            String(\n              layer.styleAttributes()[\n                \"MSAttributedStringTextTransformAttribute\"\n              ]\n            ) === \"1\"\n          )\n            textTransform = \"uppercase\"; //  null: none, 1: uppercase and 2 lowercase\n          if (\n            String(\n              layer.styleAttributes()[\n                \"MSAttributedStringTextTransformAttribute\"\n              ]\n            ) === \"2\"\n          )\n            textTransform = \"lowercase\";\n\n          // console.log( String(layer.name()) +  \" \" +  layer.font().fontName() + \" \"  + dom.fromNative(layer).style.fontWeight + \" \" +  dom.fromNative(layer).style.fontStyle  )\n          // console.log(\"-----\" )\n\n          // fontFamily : dom.fromNative(layer).style.fontFamily ,\n          // fontWeight : dom.fromNative(layer).style.fontWeight ,\n          //console.log(dom.fromNative(layer).style.fontStyle)\n          //console.log(dom.fromNative(layer).style.borders)\n          TypographyStyles.push({\n            name: String(layer.name()),\n            styles: {\n              fontFamily: dom.fromNative(layer).style.fontFamily,\n              fontWeight: convert\n                ? dom.fromNative(layer).style.fontWeight * 100\n                : dom.fromNative(layer).style.fontWeight,\n              fontSize: layer.fontSize() + (convert ? \"px\" : \"\"),\n              lineHeight: layer.lineHeight() + (convert ? \"px\" : \"\"),\n              fontStyle:\n                dom.fromNative(layer).style.fontStyle != undefined\n                  ? dom.fromNative(layer).style.fontStyle\n                  : \"normal\",\n              paragraphSpacing: dom.fromNative(layer).style.paragraphSpacing,\n              ...(convert && {\n                letterSpacing: String(layer.characterSpacing() / 10 + \"em\")\n              }),\n              ...(!convert && { kerning: layer.characterSpacing() }),\n              textTransform: textTransform,\n              borders: dom.fromNative(layer).style.borders || []\n            },\n            alignments: textAlignments,\n            adjustments: []\n          });\n        }\n      });\n    }\n\n    // get colours\n    if (String(page.name()) === \"Colours\" || String(page.name()) === \"Colors\") {\n      // page exists set to true\n      pagesExist.colors = true;\n\n      DocumentColours = {};\n      page.layers().forEach(layer => {\n        DocumentColours[layer.name()] = convert\n          ? convertSketchColourToRGBA(\n              layer\n                .style()\n                .firstEnabledFill()\n                .color()\n            )\n          : layer\n              .style()\n              .firstEnabledFill()\n              .color();\n      });\n    }\n  });\n  // Remove previous rendered pages (thanks to react-sketchapp)\n  for (let index = pages.length - 1; index >= 0; index -= 1) {\n    if (pages.length > 1) {\n      String(pages[index].name()) === \"Rendered Styles\" &&\n        doc.documentData().removePageAtIndex(index);\n    }\n  }\n\n  let allPagesHere = true;\n  let messages = [];\n\n  // first check for pages\n  if (!pagesExist.alignments) {\n    messages.push('Your document is missing the page named \"Alignments\".');\n    allPagesHere = false;\n  }\n\n  if (!pagesExist.colors) {\n    messages.push('Your document is missing the page named \"Colors\". ');\n    allPagesHere = false;\n  }\n\n  if (!pagesExist.styles) {\n    messages.push('Your document is missing the page named \"Styles\".');\n    allPagesHere = false;\n  }\n\n  // now that we have checked for pages, lets see if there is anything in them\n  if (pagesExist.alignments && textAlignments.length === 0) {\n    messages.push(\"Your alignments page has no alignments in it.\");\n    allPagesHere = false;\n  }\n\n  if (pagesExist.colors && Object.keys(DocumentColours).length === 0) {\n    messages.push(\"Your colors page has no colors in it.\");\n    allPagesHere = false;\n  }\n\n  if (pagesExist.styles && TypographyStyles.length === 0) {\n    messages.push(\"Your styles page has no styles in it.\");\n    allPagesHere = false;\n  }\n\n  let messageString = \"\";\n  messages.forEach(message => {\n    messageString += message + \"\\n\";\n  });\n\n  if (!allPagesHere) UI.alert(\"Unable to render styles\", messageString);\n\n  const DesignSystemTokens = {\n    colours: DocumentColours,\n    typography: TypographyStyles,\n    textAlignments: textAlignments,\n    render: allPagesHere\n  };\n\n  return DesignSystemTokens;\n}\n\nexport function generateTextStyles(json) {\n  // can we calculate this beforehand?\n  let typeStyles = new Array();\n\n  json.typography.forEach(item => {\n    Object.keys(json.colours).forEach(colour => {\n      item.alignments.map((align, index) => {\n        // this splits at a slash and adds the adjustments for breakpoints after the alignment\n        // assumption is that there is only one adjusment\n        let name = item.name.split(\"/\");\n        typeStyles.push({\n          name: `${name[0]}/${colour}/${index +\n            \"_\" +\n            align +\n            (name.length > 1 ? \"/\" + name[1] : \"\")}`,\n          style: {\n            textColor: dom.Style.colorToString(json.colours[colour]),\n            alignment: align,\n            ...item.styles\n          }\n        });\n      });\n    });\n  });\n\n  return typeStyles;\n}\n\nfunction checkMatch(baseStyle, newStyle, prop) {\n  let value = true;\n\n  // for now we are just going off the previous style. As this would need to check\n  // every prop across every adjustment :/\n  if (JSON.stringify(baseStyle[prop]) === JSON.stringify(newStyle[prop])) {\n    // very primitive and breaks if order is out of sync\n    value = false;\n  }\n\n  //log( prop + ' ' + baseStyle[prop] + ' ----- ' + prop  + ' ' +newStyle[prop] + '  value ' + value)\n\n  return value;\n}\n\nexport function generateJSONStyles(json, arrayFormat) {\n  let typeStyles = {};\n  let refinedBreakpoints = [];\n  //log(json.typography)\n  json.typography.forEach(item => {\n    let name = item.name.split(\"/\");\n    if (!typeStyles[name[0]]) {\n      typeStyles[name[0]] = {\n        name: name[0],\n        styles: item.styles,\n        alignments: item.alignments,\n        adjustments: []\n      };\n    } else {\n      let currentStyle = item.styles;\n      //let previousStyle = typeStyles[name[0]].styles\n      // work out previous style\n      const adjustmentLength = typeStyles[name[0]].adjustments.length;\n      refinedBreakpoints[adjustmentLength] = { name: name[1], styles: {} };\n\n      // if(adjustmentLength>0){\n      //     previousStyle = typeStyles[name[0]].adjustments[adjustmentLength-1]\n      // }\n\n      //previousStyle,\n      Object.keys(currentStyle).map(checked => {\n        if (checkMatch(typeStyles[name[0]].styles, currentStyle, checked)) {\n          refinedBreakpoints[adjustmentLength].styles[checked] =\n            currentStyle[checked];\n        }\n      });\n\n      typeStyles[name[0]].adjustments.push(\n        refinedBreakpoints[adjustmentLength]\n      );\n    }\n  });\n\n  // finally merge colours back in and return text to an array\n  let formattedTokens = {\n    colours: json.colours,\n    typography: arrayFormat\n      ? Object.keys(typeStyles).map(function(key) {\n          return typeStyles[key];\n        })\n      : typeStyles\n  };\n  return formattedTokens;\n}\n","import sketch, { Text } from \"sketch/dom\";\nimport { extractStyles, generateTextStyles } from \"./generators\";\n\nexport default function(context) {\n  console.log('starting')\n  const designTokens = extractStyles(context, false);\n  console.log('tokens')\n  const textStyles = generateTextStyles(designTokens);\n  console.log('text style')\n \n\n  // all the pages are present so we can render the styles\n  if (designTokens.render) {\n    let RenderPage = context.document.addBlankPage();\n    RenderPage.name = \"Rendered Styles\";\n \n    let document = sketch.fromNative(context.document);\n\n    // reset styles\n    // not sure how to clear up unused styles, maybe we compare the arrays at the end\n    //document.sharedTextStyles = [];\n    let stored_styles = [];\n\n   // for (const property in textStyles) {\n      const l = 100;// textStyles.length\n      for (let property = 0; property < l; property++) {\n      let styleName = textStyles[property].name;\n        console.log(styleName)\n      let checkStyle = document.sharedTextStyles.find(\n        item => item.name === styleName\n      );\n      if (typeof checkStyle === \"object\") {\n        const layer = new Text({\n          style: textStyles[property].style\n        });\n\n        checkStyle.style = layer.style;\n        stored_styles.push(checkStyle);\n\n      } else {\n        stored_styles.push({\n          name: styleName,\n          style: textStyles[property].style\n        });\n      }\n    }\n\n    // update the shared text styles with this array\n    document.sharedTextStyles = stored_styles;\n \n    let previousFrame = null;\n    // now make a page \n\n      const stl = 100;//document.sharedTextStyles.length\n      for (let property = 0; property < stl; property++) {\n \n      let textLayer = new Text({\n        text: document.sharedTextStyles[property].name,\n        parent: RenderPage,\n        frame: {\n          width : document.sharedTextStyles[property].name.length * document.sharedTextStyles[property].style.fontSize,\n          height: document.sharedTextStyles[property].style.lineHeight,\n          x: 0,\n          y:\n            previousFrame != null\n              ? Math.ceil(\n                  previousFrame.frame.height + previousFrame.frame.y + 24\n                )\n              : 0\n        },\n        sharedStyleId: document.sharedTextStyles[property].id,\n        style: document.sharedTextStyles[property].style\n      });\n     \n      textLayer.name = document.sharedTextStyles[property].name;\n      previousFrame = textLayer;\n    };\n\n    context.document.showMessage(\n      `${Object.keys(textStyles).length} styles added (${\n        Object.keys(designTokens.typography).length\n      } Text Styles * ${Object.keys(designTokens.colours).length} colours * ${\n        Object.keys(designTokens.textAlignments).length\n      } alignments) ðŸ™Œ`\n    );\n  } else {\n    context.document.showMessage(\n      \"No styles rendered. Check your document setup. Documentation here https://github.com/tbrasington/text-to-styles\"\n    );\n  }\n}\n","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}