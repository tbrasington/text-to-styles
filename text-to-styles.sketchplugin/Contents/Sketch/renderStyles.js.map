{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/generators.js","webpack://exports/./src/renderStyles.js","webpack://exports/external \"sketch/dom\""],"names":["convertSketchColourToRGBA","colour","red","Math","round","green","blue","alpha","extractStyles","context","convert","doc","document","pages","TypographyStyles","DocumentColours","textAlignments","forEach","page","index","String","name","layers","layer","alignment","textAlignment","push","class","MSTextLayer","textTransform","styleAttributes","styles","fontFamily","font","fontName","fontSize","lineHeight","fontWeight","dom","fromNative","style","fontStyle","paragraphSpacing","letterSpacing","characterSpacing","kerning","alignments","adjustments","firstEnabledFill","color","length","documentData","removePageAtIndex","DesignSystemTokens","colours","typography","generateTextStyles","json","typeStyles","item","Object","keys","map","align","split","textColor","Style","colorToString","checkMatch","baseStyle","newStyle","prop","value","JSON","stringify","generateJSONStyles","arrayFormat","refinedBreakpoints","currentStyle","adjustmentLength","checked","formattedTokens","key","designTokens","textStyles","RenderPage","addBlankPage","sketch","sharedTextStyles","previousFrame","sharedStyles","layerTextStyles","latestStyle","stylename","textLayer","Text","text","toString","parent","frame","x","y","ceil","height","sharedStyleId","objectID","showMessage"],"mappings":"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","file":"renderStyles.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/renderStyles.js\");\n","import dom from 'sketch/dom'\n\n\nfunction convertSketchColourToRGBA(colour) {\n    const red = Math.round(colour.red() * 255);\n    const green = Math.round(colour.green() * 255);\n    const blue = Math.round(colour.blue() * 255);\n    return 'rgba(' + red + ',' + green + ',' + blue + ',' + colour.alpha() + ')';\n}\n\nexport function extractStyles(context,convert) {\n      \n    const doc = context.document;\n    const pages = doc.pages()\n    \n  \n    let TypographyStyles = []\n    let DocumentColours = {};\n    let textAlignments = [];\n  \n    pages.forEach((page,index)=>{\n     \n      //  alignments\n      if(String(page.name())===\"Alignments\") {\n        page.layers().forEach(layer=>{ \n          //log(layer.name() + ' ' + layer.textAlignment()) \n          let alignment = 'left';\n          if(layer.textAlignment()===4) alignment = 'left';\n          if(layer.textAlignment()===2) alignment = 'center';\n          if(layer.textAlignment()===1) alignment = 'right';\n          textAlignments.push(alignment);\n        });\n      }\n  \n      // page styles\n      if(String(page.name())===\"Styles\") {\n        // get styles\n        page.layers().forEach(layer=>{\n         \n          if(layer.class()===MSTextLayer) {\n            \n            // log(layer.font().fontName())\n            // log(layer.fontSize())\n            // log(layer.lineHeight())\n            // log(layer.characterSpacing())\n            // log(layer.style().textStyle().encodedAttributes() )\n            //log(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])\n            let textTransform = 'none';\n            if(String(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])==='1') textTransform = 'uppercase'; //  null: none, 1: uppercase and 2 lowercase\n            if(String(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])==='2') textTransform = 'lowercase'; \n            TypographyStyles.push({\n              name  : String(layer.name()),\n              styles : {\n                fontFamily : String(layer.font().fontName()),   \n                fontSize : layer.fontSize()+(convert ? 'px' :''),\n                lineHeight : layer.lineHeight()+(convert ? 'px' :''),\n                fontWeight : dom.fromNative(layer).style.fontWeight,\n                fontStyle : dom.fromNative(layer).style.fontStyle,\n                paragraphSpacing : dom.fromNative(layer).style.paragraphSpacing,\n                ...convert && { letterSpacing: String( (layer.characterSpacing()/10)  +'em') },\n                ...!convert && { kerning: layer.characterSpacing()  },\n                textTransform : textTransform \n              },\n              alignments : textAlignments,\n              adjustments : []\n            })\n          }\n        });\n      }\n  \n      // get colours\n      if(String(page.name())===\"Colours\" || String(page.name())===\"Colors\") {\n        DocumentColours = {};\n        page.layers().forEach(layer=>{ \n          DocumentColours[layer.name()] = (convert ? convertSketchColourToRGBA(layer.style().firstEnabledFill().color()) : layer.style().firstEnabledFill().color())\n        })\n      }\n    });\n    // Remove previous rendered pages (thanks to react-sketchapp)\n    for (let index = pages.length - 1; index >= 0; index -= 1) {\n      if (pages.length > 1) {\n         ( String(pages[index].name()) ==='Rendered Styles') && doc.documentData().removePageAtIndex(index);\n      }\n    }\n\n    const DesignSystemTokens = {\n        colours: DocumentColours,\n        typography : TypographyStyles,\n        textAlignments : textAlignments\n    }\n\n    return  DesignSystemTokens\n}\n\n\n\nexport function generateTextStyles(json){\n  \n    let typeStyles={};\n  \n    json.typography.forEach(item=>{\n      Object.keys(json.colours).forEach(colour=>{ \n        item.alignments.map((align,index)=> {\n          // this splits at a slash and adds the adjustments for breakpoints after the alignment\n          // assumption is that there is only one adjusment\n          let name = item.name.split('/');\n          typeStyles[`${name[0]}/${colour}/${index+'_'+align + (name.length>1  ? '/' + name[1] : '')}` ] = {textColor: dom.Style.colorToString(json.colours[colour]), alignment: align, ...item.styles }\n        })\n      })\n    })\n  \n    return typeStyles;\n}\n\nfunction checkMatch(baseStyle,  newStyle, prop) {\n    let value = true;\n  \n    // for now we are just going off the previous style. As this would need to check \n    // every prop across every adjustment :/\n    if (JSON.stringify(baseStyle[prop]) === JSON.stringify(newStyle[prop])) { // very primitive and breaks if order is out of sync \n        value =  false       \n    } \n\n    \n    //log( prop + ' ' + baseStyle[prop] + ' ----- ' + prop  + ' ' +newStyle[prop] + '  value ' + value)\n   \n\n    return value;\n}\n\nexport function generateJSONStyles(json,arrayFormat){\n  \n    let typeStyles={};\n    let refinedBreakpoints = []\n    //log(json.typography)\n    json.typography.forEach((item)=>{\n        let name = item.name.split('/');\n        if(!typeStyles[name[0]]) {\n             \n            typeStyles[name[0]] = {\n                name : name[0],\n                styles : item.styles,\n                alignments : item.alignments,\n                adjustments : []\n            }\n\n        } else {\n            \n            let currentStyle = item.styles\n            //let previousStyle = typeStyles[name[0]].styles\n            // work out previous style\n            const adjustmentLength = typeStyles[name[0]].adjustments.length;\n            refinedBreakpoints[adjustmentLength] = { name : name[1], styles:{}}\n            \n            // if(adjustmentLength>0){\n            //     previousStyle = typeStyles[name[0]].adjustments[adjustmentLength-1]\n            // } \n            \n            //previousStyle,\n            Object.keys(currentStyle).map(checked => {\n                if(checkMatch(\n                  typeStyles[name[0]].styles,\n                  currentStyle,\n                  checked\n                ) ) {\n                  refinedBreakpoints[adjustmentLength].styles[checked] = currentStyle[checked];\n                }\n              });\n\n            typeStyles[name[0]].adjustments.push(refinedBreakpoints[adjustmentLength])\n        }\n    })\n\n    // finally merge colours back in and return text to an array\n    let formattedTokens = {\n        colours: json.colours,\n        typography : (arrayFormat ? Object.keys(typeStyles).map(function(key) {\n            return typeStyles[key];\n          }) : typeStyles) \n    }\n    return formattedTokens;\n}","import  sketch, {Text} from 'sketch/dom'\nimport {extractStyles,generateTextStyles} from './generators'\n\n\nexport default function(context) {\n\n\n  const designTokens = extractStyles(context,false)\n  const textStyles = generateTextStyles(designTokens);\n\n  let RenderPage =  context.document.addBlankPage()\n  RenderPage.name=\"Rendered Styles\";\n\n  let document = sketch.fromNative(context.document)\n\n  // reset styles\n  document.sharedTextStyles ={}\n\n  let previousFrame = null;\n  Object.keys(textStyles).forEach(style=>{\n    \n    document.sharedTextStyles.push({\n        name: String(style),\n        style: textStyles[style]\n      });\n\n      // attach the style to the render\n      let sharedStyles = context.document.documentData().layerTextStyles().sharedStyles();\n      let latestStyle = sharedStyles[sharedStyles.length-1]\n\n      let stylename = String(style);\n      let textLayer = new Text({ \n        text: style.toString(),\n        parent : RenderPage,\n        style: textStyles[style],\n        frame : { x : 0 , y :  (previousFrame   !=null ? Math.ceil(previousFrame.frame.height + previousFrame.frame.y + 24) : 0)},\n        sharedStyleId: latestStyle.objectID()\n      });\n\n      textLayer.name = stylename;\n      previousFrame = textLayer;\n  })\n\n  // success message\n  context.document.showMessage(`${Object.keys(textStyles).length} styles added (${Object.keys(designTokens.typography).length} Text Styles * ${Object.keys(designTokens.colours).length} colours * ${Object.keys(designTokens.textAlignments).length} alignments) ðŸ™Œ`);\n\n}\n","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}