{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/generators.js","webpack://exports/./src/renderStyles.js","webpack://exports/external \"sketch/dom\""],"names":["convertSketchColourToRGBA","colour","red","Math","round","green","blue","alpha","extractStyles","context","convert","doc","document","pages","TypographyStyles","DocumentColours","textAlignments","forEach","page","String","name","layers","layer","alignment","textAlignment","push","class","MSTextLayer","textTransform","styleAttributes","styles","fontFamily","font","fontName","fontSize","lineHeight","fontWeight","dom","fromNative","style","fontStyle","letterSpacing","characterSpacing","kerning","alignments","adjustments","firstEnabledFill","color","DesignSystemTokens","colours","typography","generateTextStyles","json","typeStyles","item","Object","keys","map","align","index","split","length","textColor","Style","colorToString","checkMatch","baseStyle","newStyle","prop","value","JSON","stringify","generateJSONStyles","arrayFormat","refinedBreakpoints","currentStyle","adjustmentLength","checked","formattedTokens","key","designTokens","textStyles","RenderPage","addBlankPage","sketch","sharedTextStyles","count","previousFrame","console","log","fra","textLayer","Text","text","parent","frame","x","y","ceil","height","showMessage"],"mappings":"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","file":"renderStyles.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/renderStyles.js\");\n","import dom from 'sketch/dom'\n\n\nfunction convertSketchColourToRGBA(colour) {\n    const red = Math.round(colour.red() * 255);\n    const green = Math.round(colour.green() * 255);\n    const blue = Math.round(colour.blue() * 255);\n    return 'rgba(' + red + ',' + green + ',' + blue + ',' + colour.alpha() + ')';\n}\n\nexport function extractStyles(context,convert) {\n      \n    const doc = context.document;\n    const pages = doc.pages()\n    \n  \n    let TypographyStyles = []\n    let DocumentColours = {};\n    let textAlignments = [];\n  \n    pages.forEach(page=>{\n     \n      //  alignments\n      if(String(page.name())===\"Alignments\") {\n        page.layers().forEach(layer=>{ \n          //log(layer.name() + ' ' + layer.textAlignment()) \n          let alignment = 'left';\n          if(layer.textAlignment()===4) alignment = 'left';\n          if(layer.textAlignment()===2) alignment = 'center';\n          if(layer.textAlignment()===1) alignment = 'right';\n          textAlignments.push(alignment);\n        });\n      }\n  \n      // page styles\n      if(String(page.name())===\"Styles\") {\n        // get styles\n        page.layers().forEach(layer=>{\n         \n          if(layer.class()===MSTextLayer) {\n            \n            // log(layer.font().fontName())\n            // log(layer.fontSize())\n            // log(layer.lineHeight())\n            // log(layer.characterSpacing())\n            // log(layer.style().textStyle().encodedAttributes() )\n            //log(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])\n            let textTransform = 'none';\n            if(String(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])==='1') textTransform = 'uppercase'; //  null: none, 1: uppercase and 2 lowercase\n            if(String(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])==='2') textTransform = 'lowercase'; \n            TypographyStyles.push({\n              name  : String(layer.name()),\n              styles : {\n                fontFamily : String(layer.font().fontName()),   \n                fontSize : layer.fontSize()+(convert ? 'px' :''),\n                lineHeight : layer.lineHeight()+(convert ? 'px' :''),\n                fontWeight : dom.fromNative(layer).style.fontWeight,\n                fontStyle : dom.fromNative(layer).style.fontStyle,\n                ...convert && { letterSpacing: String( (layer.characterSpacing()/10)  +'em') },\n                ...!convert && { kerning: layer.characterSpacing()  },\n                textTransform : textTransform \n              },\n              alignments : textAlignments,\n              adjustments : []\n            })\n          }\n        });\n      }\n  \n      // get colours\n      if(String(page.name())===\"Colours\" || String(page.name())===\"Colors\") {\n        DocumentColours = {};\n        page.layers().forEach(layer=>{ \n          DocumentColours[layer.name()] = (convert ? convertSketchColourToRGBA(layer.style().firstEnabledFill().color()) : layer.style().firstEnabledFill().color())\n        })\n      }\n    });\n\n    const DesignSystemTokens = {\n        colours: DocumentColours,\n        typography : TypographyStyles,\n        textAlignments : textAlignments\n    }\n\n    return  DesignSystemTokens\n}\n\n\n\nexport function generateTextStyles(json){\n  \n    let typeStyles={};\n  \n    json.typography.forEach(item=>{\n      Object.keys(json.colours).forEach(colour=>{ \n        item.alignments.map((align,index)=> {\n          // this splits at a slash and adds the adjustments for breakpoints after the alignment\n          // assumption is that there is only one adjusment\n          let name = item.name.split('/');\n          typeStyles[`${name[0]}/${colour}/${index+'_'+align + (name.length>1  ? '/' + name[1] : '')}` ] = {textColor: dom.Style.colorToString(json.colours[colour]), alignment: align, ...item.styles }\n        })\n      })\n    })\n  \n    return typeStyles;\n}\n\nfunction checkMatch(baseStyle,  newStyle, prop) {\n    let value = true;\n  \n    // for now we are just going off the previous style. As this would need to check \n    // every prop across every adjustment :/\n    if (JSON.stringify(baseStyle[prop]) === JSON.stringify(newStyle[prop])) { // very primitive and breaks if order is out of sync \n        value =  false       \n    } \n\n    \n    //log( prop + ' ' + baseStyle[prop] + ' ----- ' + prop  + ' ' +newStyle[prop] + '  value ' + value)\n   \n\n    return value;\n}\n\nexport function generateJSONStyles(json,arrayFormat){\n  \n    let typeStyles={};\n    let refinedBreakpoints = []\n    //log(json.typography)\n    json.typography.forEach((item)=>{\n        let name = item.name.split('/');\n        if(!typeStyles[name[0]]) {\n             \n            typeStyles[name[0]] = {\n                name : name[0],\n                styles : item.styles,\n                alignments : item.alignments,\n                adjustments : []\n            }\n\n        } else {\n            \n            let currentStyle = item.styles\n            //let previousStyle = typeStyles[name[0]].styles\n            // work out previous style\n            const adjustmentLength = typeStyles[name[0]].adjustments.length;\n            refinedBreakpoints[adjustmentLength] = { name : name[1], styles:{}}\n            \n            // if(adjustmentLength>0){\n            //     previousStyle = typeStyles[name[0]].adjustments[adjustmentLength-1]\n            // } \n            \n            //previousStyle,\n            Object.keys(currentStyle).map(checked => {\n                if(checkMatch(\n                  typeStyles[name[0]].styles,\n                  currentStyle,\n                  checked\n                ) ) {\n                  refinedBreakpoints[adjustmentLength].styles[checked] = currentStyle[checked];\n                }\n              });\n\n            typeStyles[name[0]].adjustments.push(refinedBreakpoints[adjustmentLength])\n        }\n    })\n\n    // finally merge colours back in and return text to an array\n    let formattedTokens = {\n        colours: json.colours,\n        typography : (arrayFormat ? Object.keys(typeStyles).map(function(key) {\n            return typeStyles[key];\n          }) : typeStyles) \n    }\n    return formattedTokens;\n}","import  sketch, {Text} from 'sketch/dom'\n\nimport {extractStyles,generateTextStyles} from './generators'\n\n\nexport default function(context) {\n\n\n  const designTokens = extractStyles(context,false)\n  const textStyles = generateTextStyles(designTokens);\n\n  let RenderPage =  context.document.addBlankPage()\n  RenderPage.name=\"Rendered Styles\";\n\n  let document = sketch.fromNative(context.document)\n\n\n  document.sharedTextStyles ={}\n  let count=0, previousFrame = null;\n  Object.keys(textStyles).forEach(style=>{\n    \n    document.sharedTextStyles.push({\n        name: String(style),\n        style: textStyles[style]\n      });\n\n      console.log ( (previousFrame !=null ? previousFrame.fra : 0) )\n      let textLayer = new Text({\n        text: String(style),\n        parent : RenderPage,\n        style: textStyles[style],\n        frame : { x : 0 , y :  (previousFrame   !=null ? Math.ceil(previousFrame.frame.height + previousFrame.frame.y + 24) : 0)}\n      });\n\n      previousFrame = textLayer;\n      count++;\n  })\n\n  // success message\n  context.document.showMessage(`${Object.keys(textStyles).length} styles added (${Object.keys(designTokens.typography).length} Text Styles * ${Object.keys(designTokens.colours).length} colours * ${Object.keys(designTokens.textAlignments).length} alignments) ðŸ™Œ`);\n\n// render(<TypeLayout colours={designTokens.colours}  typography={designTokens.typography}/>, RenderPage);\n\n}\n","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}